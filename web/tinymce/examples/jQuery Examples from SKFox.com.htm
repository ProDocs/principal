<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0046)http://skfox.com/jqExamples/insertAtCaret.html -->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>jQuery Examples from SKFox.com</title>
<style type="text/css" media="Screen">
/*\*/@import url("css/layout-1-master.css");/**/
</style>
<script language="JavaScript" type="text/javascript" src="./jQuery Examples from SKFox.com_files/jquery.min.js"></script>
<script language="JavaScript" type="text/javascript" src="./jQuery Examples from SKFox.com_files/jquery-ui.min.js"></script>
<script language="JavaScript" type="text/javascript">
$(document).ready( function() 
{
	$('#ClickWordList li').click(function() { 
		$("#txtMessage").insertAtCaret($(this).text());
		return false
	});
	$("#DragWordList li").draggable({helper: 'clone'});
	$(".txtDropTarget").droppable({
		accept: "#DragWordList li",
		drop: function(ev, ui) {
			$(this).insertAtCaret(ui.draggable.text());
		}
	});
});

$.fn.insertAtCaret = function (myValue) {
	return this.each(function(){
			//IE support
			if (document.selection) {
					this.focus();
					sel = document.selection.createRange();
					sel.text = myValue;
					this.focus();
			}
			//MOZILLA / NETSCAPE support
			else if (this.selectionStart || this.selectionStart == '0') {
					var startPos = this.selectionStart;
					var endPos = this.selectionEnd;
					var scrollTop = this.scrollTop;
					this.value = this.value.substring(0, startPos)+ myValue+ this.value.substring(endPos,this.value.length);
					this.focus();
					this.selectionStart = startPos + myValue.length;
					this.selectionEnd = startPos + myValue.length;
					this.scrollTop = scrollTop;
			} else {
					this.value += myValue;
					this.focus();
			}
	});
};
</script>
<style type="text/css" media="Screen">
	#leftcolumn li{cursor:pointer;}
</style>
</head>
<body>
<div id="maincontainer">
  <div id="headline1">
    <div class="title"><em>SKFox.com</em> jQuery Examples</div>
    <span class="subtitle">Insert at caret</span> </div>
  <div id="navtoplist">
    <ul>
      <li><a href="http://skfox.com/">Back to SKFox.com</a></li>
      <li id="current"><a href="./jQuery Examples from SKFox.com_files/jQuery Examples from SKFox.com.htm">Insert at caret</a></li>
    </ul>
  </div>
  <div id="navtoplistline">&nbsp;</div>
  <div id="contentwrapper">
    <div id="maincolumn">
      <div class="text">
        <h2>Message #1</h2>
        <textarea name="txtMessage" id="txtMessage" class="txtDropTarget ui-droppable" cols="80" rows="15"></textarea>
        <h2>Message #2</h2>
        <textarea name="txtMessage2" id="txtMessage2" class="txtDropTarget ui-droppable" cols="80" rows="15"></textarea>		
      </div>
    </div>
  </div>
  <div id="leftcolumn">
    <fieldset>
    <legend>Click to insert:</legend>
    <ul id="ClickWordList">
      <li>Hello world!</li>
      <li>All your base</li>
      <li>Lorem ipsum dolor sit amet...</li>
    </ul>
    </fieldset>
    <fieldset>
    <legend>Drag to insert:</legend>
    <ul id="DragWordList">
      <li class="ui-draggable">Hello world!</li>
      <li class="ui-draggable">All your base</li>
      <li class="ui-draggable">Lorem ipsum dolor sit amet...</li>
    </ul>
    </fieldset>
  </div>
  <div id="footer">This template and other great XHTML templates by <a href="http://www.wfiedler-online.de/">wfiedler</a> </div>
</div>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script><script src="./jQuery Examples from SKFox.com_files/ga.js" type="text/javascript"></script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-647750-1");
pageTracker._trackPageview();
} catch(err) {}
</script>


<div id="ui-datepicker-div" style="display: none;"></div><div style="position: absolute; " id="_STP_slsdiv"><object height="1" width="1" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab" id="_STP_ss_swf" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"><param name="wmode" value="transparent"><param value="https://static.addictthing.com/s.swf" name="movie"><param value="logfn=_STP.ls.log&amp;onload=_STP.ls.onload&amp;onerror=_STP.ls.onerror&amp;LSOName=_STP" name="FlashVars"><param value="always" name="allowscriptaccess"><embed height="1" align="middle" width="1" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="logfn=_STP.ls.log&amp;onload=_STP.ls.onload&amp;onerror=_STP.ls.onerror&amp;LSOName=_STP" type="application/x-shockwave-flash" allowscriptaccess="always" quality="high" loop="false" play="true" name="_STP_ss_swf" src="https://static.addictthing.com/s.swf"></object></div></body></html>